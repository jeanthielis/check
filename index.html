<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Link Pro</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #f4f7f6; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); max-width: 500px; margin: auto; }
        
        h2 { margin-top: 0; color: #333; font-size: 1.4rem; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        
        label { display: block; margin-top: 15px; font-weight: 600; color: #555; font-size: 0.9rem; }
        input { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 16px; transition: 0.2s; }
        input:focus { border-color: #25d366; outline: none; }
        
        button { width: 100%; padding: 15px; background: #25d366; color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 1.1em; margin-top: 25px; transition: 0.2s; }
        button:hover { background: #128c7e; }
        
        .section-title { font-size: 0.8rem; text-transform: uppercase; color: #888; letter-spacing: 1px; margin-top: 20px; margin-bottom: 5px; display: block; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Criar Checklist</h2>
        
        <span class="section-title">Informações do Item</span>
        <input type="text" id="produto" placeholder="Nome do Produto (ex: Biscoito Maisena)">
        <input type="text" id="lote" placeholder="Lote / Validade">

        <span class="section-title">Códigos de Barras</span>
        <input type="text" id="extra" placeholder="Código Extra">
        <input type="text" id="comercial" placeholder="Código Comercial">
        <input type="text" id="popular" placeholder="Código Popular">
        
        <button onclick="gerarLink()">Gerar e Enviar no WhatsApp</button>
    </div>

    <script>
        function gerarLink() {
            const dados = {
                produto: document.getElementById('produto').value.trim(),
                lote: document.getElementById('lote').value.trim(),
                extra: document.getElementById('extra').value.trim(),
                comercial: document.getElementById('comercial').value.trim(),
                popular: document.getElementById('popular').value.trim(),
                data: new Date().toLocaleString()
            };

            // Validação simples
            if(!dados.extra || !dados.comercial || !dados.popular) {
                alert("Os campos de código de barras são obrigatórios!");
                return;
            }

            // Se não preencher nome, coloca "Produto Genérico"
            if(!dados.produto) dados.produto = "Produto Sem Nome";
            if(!dados.lote) dados.lote = "N/A";

            // Criptografando
            const jsonStr = JSON.stringify(dados);
            const criptografado = CryptoJS.AES.encrypt(jsonStr, 'chave-mestra-123').toString();
            const paramData = encodeURIComponent(criptografado);

            const baseUrl = "https://check-confirm.netlify.app/"; // Seu link do Netlify
            const finalLink = `${baseUrl}?data=${paramData}`;

            // Abrir WhatsApp
            const textoZap = `Conferência: *${dados.produto}* (Lote: ${dados.lote})\nLink: ${finalLink}`;
            const zapUrl = `https://wa.me/?text=${encodeURIComponent(textoZap)}`;
            
            window.open(zapUrl, '_blank');
        }
    </script>
</body>
</html>